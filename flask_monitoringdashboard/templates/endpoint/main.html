{% extends "dashboard/measurement-overview.html" %}

{% block menu %}
<nav class="navbar navbar-expand-sm navbar-dark" style="background: #343a40; margin-bottom: 15px;">
  <div class="collapse navbar-collapse" id="nav-content">
    <ul class="nav">
      <li class="nav-item">
        <a class="nav-link" style="color: white" href="{{ url_for('dashboard.result_heatmap', end=end) }}">
          Heatmap
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" style="color: white" href="{{ url_for('dashboard.result_time_per_hour', end=end) }}">
           Time per hour
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" style="color: white" href="{{ url_for('dashboard.result_hits_per_hour', end=end) }}">
          Hits per hour
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" style="color: white" href="{{ url_for('dashboard.result_time_per_version_per_user', end=end) }}">
          Time per version per user
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" style="color: white" href="{{ url_for('dashboard.result_time_per_version_per_ip', end=end) }}">
          Time per version per ip
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" style="color: white" href="{{ url_for('dashboard.result_time_per_version', end=end) }}">
          Time per version
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" style="color: white" href="{{ url_for('dashboard.result_time_per_user', end=end) }}">
          Time per user
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" style="color: white" href="{{ url_for('dashboard.result_outliers', end=end) }}">
          Outliers
        </a>
      </li>
    </ul>
  </div>
</nav>
{% endblock %}

{% block subcontent %}
<div class="card mb-3">
  <div class="card-header">Summary of endpoint</div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-striped table-bordered table-hover">
        <tr>
          <td><b>Endpoint</b></td>
          <td>{{ rule.endpoint }}</td>
        </tr>
        <tr>
          <td><b>Added since app version</b></td>
          <td>{{ rule.version_added }}</td>
        </tr>
        <tr>
          <td><b>Date added to app</b></td>
          <td>{{ "{:%Y-%m-%d %H:%M:%S }".format(rule.time_added) }}</td>
        </tr>
        {% if url %}
          <tr>
            <td><b>Link to endpoint</b></td>
            <td><a href="{{ url }}">{{ url }}</a></td>
          </tr>
        {% endif %}
        <tr>
          <td><b>Last accessed</b></td>
          <td>{{ "{:%Y-%m-%d %H:%M:%S }".format(rule.last_accessed) }}</td>
        </tr>
      </table>
    </div>
  </div>
</div>

<div class="card mb-3">
  <div class="card-header">Graphs</div>
  <div class="card-body">

    <div id="loading">
      <div class="col-md-12 col-sm-12">
        <br>
        <div class="text-center">
          <img src="{{ url_for('dashboard.static', filename='loading.gif') }}"
               alt="Be patient..." align="center"/>
        </div>
      </div>
    </div>

    {% block graph_content %}
    {% endblock %}

  </div>
</div>
{% endblock %}

{% block script %}
<script>
  $(window).ready(function () {
    $('#loading').hide();
  });
</script>
{% endblock %}